<?xml version="1.0" encoding="ISO-8859-1"?>
<guidevane2d>
<!--############################################################################
################################################################################
#CONST VALUES
################################################################################
#############################################################################-->
 <!-- meridian planes -->
	<replace label="myLoop" variable="ii" values="{0}{50}{125}{250}{500}{750}{875}{950}{1000}">	
		<constValue label="cV_mplane{ii}_percent">
			<builder  name="sliderFloatParam">
				<float value="{ii}/1000." min="0." max="1."/>
			</builder>
		</constValue> 		
	</replace>

 <!-- thickness distribution -->
  <constValue label="cV_t">
    <builder  name="sliderFloatParam">
      <float value=".18" min="0." max="1."/>
    </builder>
  </constValue>  
	
	<!-- machine parameters -->
  <constValue label="cV_nBlades">
    <builder name="intParam">
      <int value="4"/>
    </builder>
  </constValue>  

 <!-- numerical parameters -->
  <constValue label="cV_conformalMappingtolerance">
    <builder name="sliderFloatParam">
      <float value="50.e-6" min="1.e-8" max="100.e-6"/>
    </builder>
  </constValue> 

  <constValue label="cV_conformalMappingNPoints">
    <builder name="intParam">
      <float value="10" min="5" max="100"/>
    </builder>
  </constValue> 

  <constValue label="cV_extrudeNPoints">
    <builder name="intParam">
      <float value="10" min="5" max="100"/>
    </builder>
  </constValue> 
	
    <constValue label="cV_thicknessIncreasingNPoints">
    <builder name="intParam">
      <float value="20" min="10" max="1000"/>
    </builder>
  </constValue> 

    <constValue label="cV_boundaryLayerBladeThick">
    <builder name="sliderFloatParam">
      <float value="50" min="0" max="100"/>
    </builder>
  </constValue> 
  
 <!-- angles -->
  <constValue label="cV_alpha_1_ex_0.0">
    <builder name="sliderFloatParam">
			<float value="0." min="-90." max="90."/>
    </builder>	 
 </constValue> 
  <constValue label="cV_alpha_1_ex_0.5">
    <builder name="sliderFloatParam">
			<float value="0." min="-90." max="90."/>
    </builder>	 
 </constValue>
   <constValue label="cV_alpha_1_ex_1.0">
    <builder name="sliderFloatParam">
			<float value="0." min="-90." max="90."/>
    </builder>	 
 </constValue> 
  <constValue label="cV_alpha_2_ex_0.0">
    <builder name="sliderFloatParam">
			<float value="0." min="-90." max="90."/>
    </builder>	 
 </constValue> 
  <constValue label="cV_alpha_2_ex_0.5">
    <builder name="sliderFloatParam">
			<float value="0." min="-90." max="90."/>
    </builder>	 
 </constValue>
   <constValue label="cV_alpha_2_ex_1.0">
    <builder name="sliderFloatParam">
			<float value="0." min="-90." max="90."/>
    </builder>	 
 </constValue>

 <!-- deltaX -->
	 <constValue label="cV_deltaX/deltaY_0.0">
    <builder name="sliderFloatParam">
			<float value=".8" min="0." max="1."/>
    </builder>	 
   </constValue>
	 <constValue label="cV_deltaX/deltaY_0.5">
    <builder name="sliderFloatParam">
			<float value=".8" min="0." max="1."/>
    </builder>	 
   </constValue>
	 <constValue label="cV_deltaX/deltaY_1.0">
    <builder name="sliderFloatParam">
			<float value=".8" min="0." max="1."/>
    </builder>	 
   </constValue>

 <!-- H -->
	 <constValue label="cV_H_0.0">
    <builder name="sliderFloatParam">
			<float value="353." min="0." max="500."/>
    </builder>	 
   </constValue>
	 <constValue label="cV_H_0.5">
    <builder name="sliderFloatParam">
			<float value="353." min="0." max="500."/>
    </builder>	 
   </constValue>
	 <constValue label="cV_H_1.0">
    <builder name="sliderFloatParam">
			<float value="353." min="0." max="500."/>
    </builder>	 
   </constValue>   

   <!-- offsetZ -->
	 <constValue label="cV_offsetZ_0.0">
    <builder name="sliderFloatParam">
			<float value="4237.85" min="0." max="10000."/>
    </builder>	 
   </constValue>
	 <constValue label="cV_offsetZ_0.5">
    <builder name="sliderFloatParam">
			<float value="4237.85" min="0." max="10000."/>
    </builder>	 
   </constValue>
	 <constValue label="cV_offsetZ_1.0">
    <builder name="sliderFloatParam">
			<float value="4237.85" min="0." max="10000."/>
    </builder>	 
   </constValue>
   <!-- ttSuction -->
	 <constValue label="cV_tSuction_0.0">
    <builder name="sliderFloatParam">
			<float value=".18" min=".0" max="1."/>
    </builder>	 
   </constValue>
	 <constValue label="cV_tSuction_0.5">
    <builder name="sliderFloatParam">
			<float value=".18" min=".0" max="1."/>
    </builder>	 
   </constValue>
	 <constValue label="cV_tSuction_1.0">
    <builder name="sliderFloatParam">
			<float value=".18" min=".0" max="1."/>
    </builder>	 
   </constValue>  
   <!-- ttPressure -->
	 <constValue label="cV_tPressure_0.0">
    <builder name="sliderFloatParam">
			<float value=".18" min=".0" max="1."/>
    </builder>	 
   </constValue>
	 <constValue label="cV_tPressure_0.5">
    <builder name="sliderFloatParam">
			<float value=".18" min=".0" max="1."/>
    </builder>	 
   </constValue>
	 <constValue label="cV_tPressure_1.0">
    <builder name="sliderFloatParam">
			<float value=".18" min=".0" max="1."/>
    </builder>	 
   </constValue> 
	 <!-- trailing edge thickness -->
	 <constValue label="cV_trailingEdgeThick">
    <builder name="sliderFloatParam">
			<float value="5." min="0." max="100."/>
    </builder>	 
   </constValue>

<!--############################################################################
################################################################################
#ANALYTIC FUNCTIONS
################################################################################
#############################################################################-->   
<!-- <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< -->  
<!-- transformer definitions -->
<!-- <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< -->  	
  <function label="myBaseContainer">
    <builder name="baseContainer">
			<transformer name="translate" label="transM">
				<Vector_2 x="0." y="4000."/>
				<Vector_3 x="0." y="4000." z="0."/>				
			</transformer>
    </builder>
  </function>

<!-- <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< -->  
<!-- design parameters -->
<!-- <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< -->  	  
	<!-- deltaX -->
	<function label="f_deltaX/deltaY"> 
    <builder  name="scaCurve2dOneD" order="2">
			<Point_2 x="0." y="#cV_deltaX/deltaY_0.0#"/>
			<Point_2 x=".5" y="#cV_deltaX/deltaY_0.5#"/>
			<Point_2 x="1." y="#cV_deltaX/deltaY_1.0#"/>
    </builder>
  </function>	

	<!-- H -->
	<function label="f_H"> 
    <builder  name="scaCurve2dOneD" order="2">
			<Point_2 x="0." y="#cV_H_0.0#"/>
			<Point_2 x=".5" y="#cV_H_0.5#"/>
			<Point_2 x="1." y="#cV_H_1.0#"/>
    </builder>
  </function>	

	<!-- offsetZ -->
	<function label="f_offsetZ"> 
    <builder  name="scaCurve2dOneD" order="2">
			<Point_2 x="0.0" y="#cV_offsetZ_0.0#"/>
			<Point_2 x="0.5" y="#cV_offsetZ_0.5#"/>
			<Point_2 x="1.0" y="#cV_offsetZ_1.0#"/>
    </builder>
  </function>	  
	
	<!-- t -->
	<function label="f_tSuction"> 
    <builder  name="scaCurve2dOneD" order="2">
			<Point_2 x="0.0" y="#cV_tSuction_0.0#"/>
			<Point_2 x="0.5" y="#cV_tSuction_0.5#"/>
			<Point_2 x="1.0" y="#cV_tSuction_1.0#"/>
    </builder>
  </function>
	<function label="f_tPressure"> 
    <builder  name="scaCurve2dOneD" order="2">
			<Point_2 x="0.0" y="#cV_tPressure_0.0#"/>
			<Point_2 x="0.5" y="#cV_tPressure_0.5#"/>
			<Point_2 x="1.0" y="#cV_tPressure_1.0#"/>
    </builder>
  </function>

	<!-- angles -->
  <function label="f_alpha_1"> 
    <builder  name="scaCurve2dOneD" order="2">
				<Point_2 x="0.0" y="90.0"/>
				<Point_2 x="0.1" y="90.0"/>
				<Point_2 x="0.2" y="90.0"/>
				<Point_2 x="0.3" y="90.0"/>
				<Point_2 x="0.4" y="90.0"/>
				<Point_2 x="0.5" y="90.0"/>
				<Point_2 x="0.6" y="90.0"/>
				<Point_2 x="0.7" y="90.0"/>
				<Point_2 x="0.8" y="90.0"/>
				<Point_2 x="0.9" y="90.0"/>
				<Point_2 x="1.0" y="90.0"/>	
    </builder>
  </function>
  <function label="f_alpha_1_ex"> 
    <builder  name="scaCurve2dOneD" order="2">
			<Point_2 x="0." y="#cV_alpha_1_ex_0.0#"/>
			<Point_2 x="#cV_mplane500_percent#" y="#cV_alpha_1_ex_0.5#"/>
			<Point_2 x="1." y="#cV_alpha_1_ex_1.0#"/>	
    </builder>
  </function>		
  <function label="f_alpha_2"> 
    <builder  name="scaCurve2dOneD" order="2">
			<Point_2 x="0.0" y="58.1"/>
			<Point_2 x="0.1" y="66.6"/>
			<Point_2 x="0.2" y="71.7"/>
			<Point_2 x="0.3" y="75.0"/>
			<Point_2 x="0.4" y="77.3"/>
			<Point_2 x="0.5" y="79.0"/>
			<Point_2 x="0.6" y="80.3"/>
			<Point_2 x="0.7" y="81.3"/>
			<Point_2 x="0.8" y="82.1"/>
			<Point_2 x="0.9" y="82.8"/>
			<Point_2 x="1.0" y="83.4"/>
    </builder>
  </function>
  <function label="f_alpha_2_ex"> 
    <builder  name="scaCurve2dOneD" order="2">
			<Point_2 x="0." y="#cV_alpha_2_ex_0.0#"/>
			<Point_2 x="#cV_mplane500_percent#" y="#cV_alpha_2_ex_0.5#"/>
			<Point_2 x="1." y="#cV_alpha_2_ex_1.0#"/>	
    </builder>
  </function>

<!-- <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< -->  
<!-- blade cuts  -->
<!-- <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< -->  	  
	<replace variable="ii" values="{0}{50}{125}{250}{500}{750}{875}{950}{1000}">	
<!-- meanlines -->
		<function label="f_meanLineMplane{ii}">
			<builder name="sca3PointMeanline"
				alpha_one="_pi * ($f_alpha_1(#cV_mplane{ii}_percent#)$ + $f_alpha_1_ex(#cV_mplane{ii}_percent#)$) / 180."
				alpha_two="_pi * ($f_alpha_2(#cV_mplane{ii}_percent#)$ + $f_alpha_2_ex(#cV_mplane{ii}_percent#)$) / 180."
				ratio="$f_deltaX/deltaY(#cV_mplane{ii}_percent#)$"
				delta_y="$f_H(#cV_mplane{ii}_percent#)$"
				order="2"
				mirror_y="true">
					<function/> 
			</builder>
		</function>		
<!-- thickness distributions -->		
		<function label="f_thicknessDistributionSuction_mplane{ii}"> 
			<builder  name="scaMuParserOneD">
				<string type="expression" 
								value="($f_tSuction(#cV_mplane{ii}_percent#)$ * 400. /0.2) 
											* ( 0.2969*sqrt(xx) 
												- 0.1260*(xx) 
												- 0.3516*(xx)^2. 
												+ 0.2843*(xx)^3. 
												- 0.1015*(xx)^4.
												- 0.0021*(xx)^4)
												+ #cV_trailingEdgeThick# * xx"/>
				<string type="argument" value="xx"/>
				<range min="0." max="1."/>
			</builder>
		</function>
		<function label="f_thicknessDistributionPressure_mplane{ii}"> 
			<builder  name="scaMuParserOneD">
				<string type="expression" 
								value="($f_tPressure(#cV_mplane{ii}_percent#)$ * 400. /0.2) 
											* ( 0.2969*sqrt(xx) 
												- 0.1260*(xx) 
												- 0.3516*(xx)^2. 
												+ 0.2843*(xx)^3. 
												- 0.1015*(xx)^4.
												- 0.0021*(xx)^4)
												+ #cV_trailingEdgeThick# * xx"/>
				<string type="argument" value="xx"/>
				<range min="0." max="1."/>
			</builder>
		</function>			
<!-- blade cuts (meanline with added thickness -->
		<function label="f_mplane{ii}">
			<builder name="analyticFunction">
			<transformer name="biThicknessIncreasing"
									function_label="f_thicknessDistributionSuction_mplane{ii}"
									function_label_inverted="f_thicknessDistributionPressure_mplane{ii}"
									parameter_one_percent_function="f_pointDistribution_3_spline" 
									number_points_one="#cV_thicknessIncreasingNPoints#"
									reverse="true"
									order="2"/>
				<function label="f_meanLineMplane{ii}"/>
			</builder>
		</function>		
<!-- blade cuts as 3d function f:(u)->(phiR, m, s)  -->
		<function label="vec3d1d_bladeCut_{ii}">
			<builder name="analyticFunction">
				<transformer name="addConstCoordinate" coordinate_value="{ii}">
					<Vector_3 label="v3_zz"/>
				</transformer>
				<analyticFunction label="~transM(f_mplane{ii})~"/>
			</builder>
		</function>		
<!-- meanline as 3d function f:(u)->(phiR, m, s)  -->		
		<function label="vec3d1d_meanline_{ii}">
			<builder name="analyticFunction">
				<transformer name="addConstCoordinate" coordinate_value="{ii}">
					<Vector_3 label="v3_zz"/>
				</transformer>
				<analyticFunction label="~transM(f_meanLineMplane{ii})~"/>
			</builder>
		</function>	
  </replace>

<!-- <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< -->  
<!-- meanplane as 3d function f:(u, v)->(phiR, m, s)  -->
<!-- <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< -->  		
	<function label="vec3d2d_meanPlane">
		<builder name="vec3dSurfaceTwoD">
			<analyticFunction label="vec3d1d_meanline_0"/>
			<analyticFunction label="vec3d1d_meanline_50"/>
			<analyticFunction label="vec3d1d_meanline_125"/>
			<analyticFunction label="vec3d1d_meanline_250"/>
			<analyticFunction label="vec3d1d_meanline_500"/>
			<analyticFunction label="vec3d1d_meanline_750"/>
			<analyticFunction label="vec3d1d_meanline_875"/>
			<analyticFunction label="vec3d1d_meanline_950"/>
			<analyticFunction label="vec3d1d_meanline_1000"/>
		</builder>
	</function>
	
<!-- <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< -->  
<!-- blade as 3d function f:(u, v)->(phiR, m, s)  -->
<!-- <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< -->  	
	<function label="vec3d2d_blade">
		<builder name="vec3dSurfaceTwoD">
			<analyticFunction label="vec3d1d_bladeCut_0"/>
			<analyticFunction label="vec3d1d_bladeCut_50"/>
			<analyticFunction label="vec3d1d_bladeCut_125"/>
			<analyticFunction label="vec3d1d_bladeCut_250"/>
			<analyticFunction label="vec3d1d_bladeCut_500"/>
			<analyticFunction label="vec3d1d_bladeCut_750"/>
			<analyticFunction label="vec3d1d_bladeCut_875"/>
			<analyticFunction label="vec3d1d_bladeCut_950"/>
			<analyticFunction label="vec3d1d_bladeCut_1000"/>
		</builder>
	</function>
	
<!-- <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< -->  
<!-- trailing edge -->
<!-- <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< -->  		
	<function label="vec3d1d_blade_teOne">
		<builder name="analyticFunction">
			<transformer name="pickVec3dTwoDRangePercent" x_one_percent="0."/> 
			<analyticFunction label="vec3d2d_blade"/>
		</builder>
	</function>	
	<function label="vec3d1d_blade_teTwo">
		<builder name="analyticFunction">
			<transformer name="pickVec3dTwoDRangePercent" x_one_percent="1."/> 
			<analyticFunction label="vec3d2d_blade"/>
		</builder>
	</function>		
	<function label="vec3d2d_blade_te">
		<builder name="vec3dSurfaceTwoD">
			<analyticFunction label="vec3d1d_blade_teOne"/>
			<analyticFunction label="vec3d1d_blade_teTwo"/>
		</builder>
	</function>	

<!-- <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< -->  
<!-- analyticBlade -->
<!-- <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< -->  		
<!-- thickness distributions -->	
	<function label="v3d2d_thicknessDistribution">
    <builder  name="muParser">
			<expression value="
          xx &lt; 1. 
				  ? 
						( 0.18 * 400. /0.2) 
						* ( 0.2969*sqrt( 1.-xx ) 
						- 0.1260*( 1.-xx ) 
						- 0.3516*( 1.-xx )^2. 
						+ 0.2843*( 1.-xx )^3. 
						- 0.1015*( 1.-xx )^4.
						- 0.0021*( 1.-xx )^4)
						+ #cV_trailingEdgeThick# * ( 1.-xx )
					: 
						-1. * ( 
							( 0.18 * 400. /0.2) 
							* ( 0.2969*sqrt( xx-1. ) 
							- 0.1260*( xx-1. ) 
							- 0.3516*( xx-1. )^2. 
							+ 0.2843*( xx-1. )^3. 
							- 0.1015*( xx-1. )^4.
							- 0.0021*( xx-1. )^4)
							+ #cV_trailingEdgeThick# * ( xx-1. )
					  )
				, 
				xx &lt; 1. 
				  ? 1.-xx 
					: xx-1.
				,
				yy
				"
				dimension="3"/>
      <x_one name="xx" min="0." max="2."/>
			<x_two name="yy" min="0." max="1."/>
    </builder>
  </function>	
	<function label="v3d2d_thicknessDistribution_te">
    <builder  name="muParser">
			<expression value="
          xx &lt; 1.0 
				  ? 
						#cV_trailingEdgeThick# * ( 1.-xx )
					: 
						-1. * #cV_trailingEdgeThick# * ( xx - 1. )
				, 
				  1.
				,
				  yy
				"
				dimension="3"/>
      <x_one name="xx" min="0." max="2."/>
			<x_two name="yy" min="0." max="1."/>
    </builder>
  </function>	
<!-- analyticBlade and analyticBlade trailing edge as a "composition" -->	
	<function label="vec3d2d_bladeAnalytic">
    <builder name="analyticFunction">
      <transformer name="analyticAddNormal"
                 function_label="v3d2d_thicknessDistribution"
								 scale_vector="v3_zz"/>
      <function label="vec3d2d_meanPlane"/>
    </builder>
  </function>			
	<function label="vec3d2d_bladeAnalytic_te">
    <builder name="analyticFunction">
      <transformer name="analyticAddNormal"
                 function_label="v3d2d_thicknessDistribution_te"
								 scale_vector="v3_zz"/>
      <function label="vec3d2d_meanPlane"/>
    </builder>
  </function>				
</guidevane2d>
