<?xml version="1.0" encoding="ISO-8859-1"?>
<canadaGuidevaneChannel>

<!--############################################################################
################################################################################
#PARTS
################################################################################
#############################################################################-->
<!--
  $$ - define functions
  ## - define slider values
  
  mat_names
		blue tropical tropical.19
		green tropical tropical.26
		red tropical tropical.09
		yellow tropical tropical.0
		blue neon neon.01
		green neon neon.05
		red neon neon.17
		yellow neon neon.10

  p3 -> Point_3
  v3 -> Vector_3
  s3 -> splineCurve3d
  fV -> function
  cV -> constValue
  s3 -> spline3d
  rS -> rotatingSpline
  s3BTS -> spline3dBoundToAnalyticSurface
  f  -> function
  mB -> meshBlock
-->

<!--  <staticProperties label="">
		<option name="reparamOnFace_precision" value="1.e-8"/>
		<option name="reparamInVolume_precision" value="1.e-8"/>
		<option name="geometricResolution" value="1.e-2"/>
		<option name="minPointDistance" value="1.e-8"/>
		<option name="point_diameter" value="2."/>
		<option name="vector_tipSize" value="10."/>
		<option name="snapTol" value="1.e-8"/>
		<option name="reparamMaxAngle" value="1.e-2"/>
		<option name="reparamNPoints" value="100"/>		
		<option name="reparamNPointsU" value="100"/>
		<option name="reparamNPointsV" value="10"/>		
	</staticProperties>-->
	
<!-- definitions -->
  <part label="myPointDefinitions">
    <builder name="pointDefinition"
		         height="10.">
        <Point_3 label="p3_origin" x="0." y="0." z="0."/>                 
    </builder>
  </part>
  <part label="myVectorDefinitions">
    <builder name="vectorDefinition"
		         tip_size="50.">
      <Vector_3 label="v3_zz" x="0." y="0." z="1."/>                
    </builder>
  </part>

<!-- <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< -->  
<!-- meanPlaneChannel -->
<!-- <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< -->    
  <part label="s3_channelShroud">
    <builder name="bSplineCurve_pointPickFromPartConstructOCC" 
             part_label="rS_shroud" order="3">
      <transformer name="conformalMappingStartFromPoint"
                   part_label="rS_shroud"
                   tolerance="#cV_conformalMappingtolerance#"
									 datum_radius="#cV_rShroud#"
                   offset_z="$f_offsetZ(1.)$"/>
      <Point_2 label="channel_onShroud_point"
               attribute="pick_order_from_function" 
               function_label="f_channelShroud" 
               parameter_percent_function="f_pointDistribution_0_lin" 
               number_points="#cV_conformalMappingNPointsChannel#"/>
			</builder>
  </part>
  <part label="s3_channelMplane250">
    <builder name="bSplineCurve_pointPickFromPartConstructOCC" 
             part_label="rS_mplane250" order="3">
      <transformer name="conformalMappingStartFromPoint"
                   part_label="rS_mplane250"
                   tolerance="#cV_conformalMappingtolerance#"
									 datum_radius="#cV_rMplane250#"
                   offset_z="$f_offsetZ(#cV_mplane250_percent#)$"/>
      <Point_2 label="channel_onShroud_point"
               attribute="pick_order_from_function" 
               function_label="f_channelMplane250" 
               parameter_percent_function="f_pointDistribution_0_lin" 
               number_points="#cV_conformalMappingNPointsChannel#"/>
			</builder>
  </part>	
  <part label="s3_channelMplane500">
    <builder name="bSplineCurve_pointPickFromPartConstructOCC" 
             part_label="rS_mplane500" order="3">
      <transformer name="conformalMappingStartFromPoint"
                   part_label="rS_mplane500"
                   tolerance="#cV_conformalMappingtolerance#"
									 datum_radius="#cV_rMplane500#"
                   offset_z="$f_offsetZ(#cV_mplane500_percent#)$"/>
      <Point_2 label="channel_onShroud_point"
               attribute="pick_order_from_function" 
               function_label="f_channelMplane500" 
               parameter_percent_function="f_pointDistribution_0_lin"
               number_points="#cV_conformalMappingNPointsChannel#"/>
			</builder>
  </part>
  <part label="s3_channelMplane750">
    <builder name="bSplineCurve_pointPickFromPartConstructOCC" 
             part_label="rS_mplane750" order="3">
      <transformer name="conformalMappingStartFromPoint"
                   part_label="rS_mplane750"
                   tolerance="#cV_conformalMappingtolerance#"
									 datum_radius="#cV_rMplane750#"
                   offset_z="$f_offsetZ(#cV_mplane750_percent#)$"/>
      <Point_2 label="channel_onShroud_point"
               attribute="pick_order_from_function" 
               function_label="f_channelMplane750" 
               parameter_percent_function="f_pointDistribution_0_lin" 
               number_points="#cV_conformalMappingNPointsChannel#"/>
			</builder>
  </part>	
  <part label="s3_channelHub">
    <builder name="bSplineCurve_pointPickFromPartConstructOCC" 
             part_label="rS_hub" order="3"
						 render_resolution_first="1000"
						 render_resolution_second="1000">
      <transformer name="conformalMappingStartFromPoint"
                   part_label="rS_hub"
                   tolerance="#cV_conformalMappingtolerance#"
									 datum_radius="#cV_rHub#"
                   offset_z="$f_offsetZ(0.)$"/>
      <Point_2 label="channel_onShroud_point"
               attribute="pick_order_from_function" 
               function_label="f_channelHub" 
               parameter_percent_function="f_pointDistribution_0_lin" 
               number_points="#cV_conformalMappingNPointsChannel#"/>
			</builder>
  </part>
	
  <part label="aS_meanPlane"
        render_material="tropical tropical.26"
        render_transparency="0.6">
    <builder name="bSplineSurface_skinConstructOCCDecorator" 
             order="2"
             render_material="tropical tropical.26"
						 analyticGeometry_offset="1">					 
				<analyticGeometry label="s3_channelHub"/> 
				<analyticGeometry label="s3_channelMplane250"/> 
				<analyticGeometry label="s3_channelMplane500"/> 
				<analyticGeometry label="s3_channelMplane750"/> 
				<analyticGeometry label="s3_channelShroud"/>
		</builder>
  </part>
  <part label="aS_meanPlaneBlade"
        render_material="tropical tropical.26"
        render_transparency="0.6">
    <builder name="bSplineSurface_skinConstructOCC" 
             order="2"
             render_material="tropical tropical.26"
						 analyticGeometry_offset="1">					 
				<analyticGeometry label="s3_meanLineHub"/> 
				<analyticGeometry label="s3_meanLineMplane250"/> 
				<analyticGeometry label="s3_meanLineMplane500"/> 
				<analyticGeometry label="s3_meanLineMplane750"/> 
				<analyticGeometry label="s3_meanLineShroud"/>
		</builder>
  </part>	

<!-- <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< -->  
<!-- channel -->
<!-- <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< -->
  <part label="aS_channel_east"
        render_material="tropical tropical.17"
        render_transparency="0.6">
    <builder name="analyticGeometry">
      <transformer name="rotate"
                   origin="p3_origin"
                   rotation_vector="v3_zz"
                   angle="_pi / #cV_nBlades#"
                   number_pieces="1"/>
      <analyticGeometry label="aS_meanPlane"/> 
    </builder>
  </part>

  <part label="aS_channel_west"
        render_material="tropical tropical.17"
        render_transparency="0.6">
    <builder name="analyticGeometry">
      <transformer name="rotate"
                   origin="p3_origin"
                   rotation_vector="v3_zz"
                   angle="-1. * _pi / #cV_nBlades#"
                   number_pieces="1"/>
      <analyticGeometry label="aS_meanPlane"/> 
    </builder>
  </part>

  <part label="s3_channel_north"
        render_material="tropical tropical.26"
				render_resolution_first="100">
			<builder name="analyticGeometry">
			  <transformer name="pickRange"
                     parameter_one_start_percent="0."
                     parameter_two_start_percent="1."
                     parameter_one_end_percent="1."
                     parameter_two_end_percent="1."/>
				<analyticGeometry label="aS_channel_west"/>								 
			</builder>
  </part>	
  <part label="rS_channel_north" 
        render_transparency="0.6">
		<builder name="surfaceOfRevolution_curveRotateConstructOCC"
             show_construction="false">
				<analyticGeometry label="s3_channel_north"/>
      <Point_3 label="p3_origin" attribute="origin"/>
      <Vector_3 label="v3_zz" attribute="rotation_axis"/>
			<float value="2 * _pi / #cV_nBlades#" attribute="angle"/>			
		</builder>
  </part>
  <part label="s3_channel_south"
        render_material="tropical tropical.26"
				render_resolution_first="100">
			<builder name="analyticGeometry">
			  <transformer name="pickRange"
                     parameter_one_start_percent="0."
                     parameter_two_start_percent="0."
                     parameter_one_end_percent="1."
                     parameter_two_end_percent="0."/>
				<analyticGeometry label="aS_channel_west"/>								 
			</builder>
  </part>	
  <part label="rS_channel_south" 
        render_transparency="0.6"
						 render_resolution_first="1000"
						 render_resolution_second="1000">
		<builder name="surfaceOfRevolution_curveRotateConstructOCC"
             show_construction="false">
				<analyticGeometry label="s3_channel_south"/>
      <Point_3 label="p3_origin" attribute="origin"/>
      <Vector_3 label="v3_zz" attribute="rotation_axis"/>
			<float value="2 * _pi / #cV_nBlades#" attribute="angle"/>			
		</builder>
  </part>	
  <part label="s3_channel_front"
        render_material="tropical tropical.26"
				render_resolution_first="100">
			<builder name="analyticGeometry">
			  <transformer name="pickRange"
                     parameter_one_start_percent="0."
                     parameter_two_start_percent="0."
                     parameter_one_end_percent="0."
                     parameter_two_end_percent="1."/>
				<analyticGeometry label="aS_channel_west"/>								 
			</builder>
  </part>	
  <part label="rS_channel_front" 
        render_transparency="0.6">
		<builder name="surfaceOfRevolution_curveRotateConstructOCC"
             show_construction="false">
				<analyticGeometry label="s3_channel_front"/>
      <Point_3 label="p3_origin" attribute="origin"/>
      <Vector_3 label="v3_zz" attribute="rotation_axis"/>
			<float value="2 * _pi / #cV_nBlades#" attribute="angle"/>			
		</builder>
  </part>		
  <part label="s3_channel_back"
        render_material="tropical tropical.26"
				render_resolution_first="100">
			<builder name="analyticGeometry">
			  <transformer name="pickRange"
                     parameter_one_start_percent="1."
                     parameter_two_start_percent="0."
                     parameter_one_end_percent="1."
                     parameter_two_end_percent="1."/>
				<analyticGeometry label="aS_channel_west"/>								 
			</builder>
  </part>		
  <part label="rS_channel_back" 
        render_transparency="0.6">
		<builder name="surfaceOfRevolution_curveRotateConstructOCC"
             show_construction="false">
				<analyticGeometry label="s3_channel_back"/>
      <Point_3 label="p3_origin" attribute="origin"/>
      <Vector_3 label="v3_zz" attribute="rotation_axis"/>
			<float value="2 * _pi / #cV_nBlades#" attribute="angle"/>			
		</builder>
  </part>

  <part label="aS_channel_internal"
        render_material="tropical tropical.26">
    <builder name="analyticGeometry">
<!--		  <transformer name="closeGaps"
                     parameter_two_start_part_label="rS_channel_south"
											 parameter_two_end_part_label="rS_channel_north"/> -->
				<analyticGeometry label="aS_blade"/>
    </builder>  
  </part>

  
  <part label="t6SC_cardinalDir"
        render_material="tropical tropical.26"
        render_transparency="0.6"
				render_resolution_first="10"
			  render_resolution_second="10">	
    <builder name="trans6SidedCube">
				<analyticGeometry label="rS_channel_north"/>
				<analyticGeometry label="aS_channel_west"/>
				<analyticGeometry label="rS_channel_south"/>
				<analyticGeometry label="aS_channel_east"/>
				<analyticGeometry label="rS_channel_front"/>
				<analyticGeometry label="rS_channel_back"/>
    </builder>  
  </part>  
	
	<!--
		<part label="aS_channel_internal_resplined">
		<builder name="resplineMap2dTo3dInMap3dTo3d">
			<map2dTo3d label="aS_channel_internal"/>
			<map3dTo3d label="t6SC_cardinalDir"/>
		</builder>
	</part>
	-->
<!--############################################################################
################################################################################
#FUNCTIONS
################################################################################
#############################################################################-->
  <!-- channel -->
  <function label="f_channel_alphaIn"> 
    <builder  name="scaCurve2dOneD" order="2">
			<Point_2 x="0." y="#cV_channel_alphaIn_hub#"/>
			<Point_2 x=".5" y="#cV_channel_alphaIn_mplane500#"/>
			<Point_2 x="1." y="#cV_channel_alphaIn_shroud#"/>
    </builder>
  </function>	
  <function label="f_channel_alphaOut"> 
    <builder  name="scaCurve2dOneD" order="2">
			<Point_2 x="0." y="#cV_channel_alphaOut_hub#"/>
			<Point_2 x=".5" y="#cV_channel_alphaOut_mplane500#"/>
			<Point_2 x="1." y="#cV_channel_alphaOut_shroud#"/>
    </builder>
  </function>			

  <!-- channel shroud -->
	<function label="f_channelShroud">
		<builder name="analyticFunction">
    <transformer name="predefinedExtension"
                 alpha_in="$f_channel_alphaIn(1.)$" 
								 alpha_out="$f_channel_alphaOut(1.)$"
                 y_in="-#cV_channel_yIn#" 
								 y_out="#cV_channel_yOut#"/>				
			<function label="f_meanLineShroud"/> 		
	  </builder>
	</function>
	
	<!-- channel mplane250 -->
	<function label="f_channelMplane250">
		<builder name="analyticFunction">
    <transformer name="predefinedExtension"
                 alpha_in="$f_channel_alphaIn(#cV_mplane250_percent#)$" 
								 alpha_out="$f_channel_alphaOut(#cV_mplane250_percent#)$"
                 y_in="-#cV_channel_yIn#" 
								 y_out="#cV_channel_yOut#"/>				
			<function label="f_meanLineMplane250"/> 		
	  </builder>
	</function>	
	
	<!-- channel mplane500 -->
	<function label="f_channelMplane500">
		<builder name="analyticFunction">
    <transformer name="predefinedExtension"
                 alpha_in="$f_channel_alphaIn(#cV_mplane500_percent#)$" 
								 alpha_out="$f_channel_alphaOut(#cV_mplane500_percent#)$"
                 y_in="-#cV_channel_yIn#" 
								 y_out="#cV_channel_yOut#"/>	
		<function label="f_meanLineMplane500"/> 		
	  </builder>
	</function>
	
	<!-- channel mplane750 -->
	<function label="f_channelMplane750">
		<builder name="analyticFunction">
    <transformer name="predefinedExtension"
                 alpha_in="$f_channel_alphaIn(#cV_mplane750_percent#)$" 
								 alpha_out="$f_channel_alphaOut(#cV_mplane750_percent#)$"
                 y_in="-#cV_channel_yIn#" 
								 y_out="#cV_channel_yOut#"/>				
			<function label="f_meanLineMplane750"/> 		
	  </builder>
	</function>		
	
	<!-- channel hub -->
	<function label="f_channelHub">	
		<builder name="analyticFunction">
    <transformer name="predefinedExtension"
                 alpha_in="$f_channel_alphaIn(0.)$" 
								 alpha_out="$f_channel_alphaOut(0.)$"
                 y_in="-#cV_channel_yIn#" 
								 y_out="#cV_channel_yOut#"/>				
			<function label="f_meanLineHub"/> 		
	  </builder>
	</function>

<!--############################################################################
################################################################################
#CONST VALUES
################################################################################
#############################################################################-->
  <constValue label="cV_conformalMappingNPointsChannel">
   <builder name="intParam">
    <float value="100" min="20" max="100"/>
   </builder>
  </constValue>		
 <!-- channel alphaIn --> 
	 <constValue label="cV_channel_alphaIn_hub">
    <builder name="sliderFloatParam">
			<float value=".5" min="0." max="1."/>
    </builder>	 
   </constValue>
	 <constValue label="cV_channel_alphaIn_mplane500">
    <builder name="sliderFloatParam">
			<float value=".5" min="0." max="1."/>
    </builder>	 
   </constValue>
	 <constValue label="cV_channel_alphaIn_shroud">
    <builder name="sliderFloatParam">
			<float value=".5" min="0." max="1."/>
    </builder>	 
   </constValue>   
 <!-- channel alphaOut -->
	 <constValue label="cV_channel_alphaOut_hub">
    <builder name="sliderFloatParam">
			<float value=".01" min="0." max="1."/>
    </builder>	 
   </constValue>
	 <constValue label="cV_channel_alphaOut_mplane500">
    <builder name="sliderFloatParam">
			<float value=".2" min="0." max="1."/>
    </builder>	 
   </constValue>
	 <constValue label="cV_channel_alphaOut_shroud">
    <builder name="sliderFloatParam">
			<float value=".2" min="0." max="1."/>
    </builder>	 
   </constValue>
	 <constValue label="cV_channel_yIn">
    <builder name="sliderFloatParam">
			<float value="4000." min="1000." max="16000."/>
    </builder>	 
   </constValue>
	 <constValue label="cV_channel_yOut">
    <builder name="sliderFloatParam">
			<float value="4000." min="1000." max="16000."/>
    </builder>	 
   </constValue>
</canadaGuidevaneChannel>
