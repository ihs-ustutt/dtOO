MACRO(USE_GMSH)
  SET(GMSH_FIND_REQUIRED FALSE) 
  FIND_PACKAGE(OpenCASCADE)
  IF (OpenCASCADE_FOUND)
    FIND_PACKAGE(GMSH)
    USE_OpenCASCADE()
  ELSE(OpenCASCADE_FOUND)
    USING_MESSAGE("Using GMSH without OpenCASCADE")
    FIND_PACKAGE(GMSH)
  ENDIF(OpenCASCADE_FOUND)
  IF ((NOT GMSH_FOUND))
    USING_MESSAGE("Skipping because of missing GMSH")
    RETURN()
  ENDIF((NOT GMSH_FOUND))
  IF(NOT GMSH_USED AND GMSH_FOUND)
    SET(GMSH_USED TRUE)
    INCLUDE_DIRECTORIES(${GMSH_INCLUDE_DIR})
    SET(EXTRA_LIBS ${EXTRA_LIBS} ${GMSH_LIBRARIES})
  ENDIF()
ENDMACRO(USE_GMSH)
